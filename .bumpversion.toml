[tool.bumpversion]
current_version = "2.2.0"
tag_name = "v{new_version}"
commit = false
allow_dirty = true
tag = true
# support "1.2.3+master" or "1.2.3+dev" to indicate it a tree checkout
parse = "(?P<major>\\d+)\\.(?P<minor>\\d+)\\.(?P<patch>\\d+)(?:\\+(?P<branch>[a-z0-9]+))?"
serialize = [
   "{major}.{minor}.{patch}+{branch}",
   "{major}.{minor}.{patch}"
]

[tool.bumpversion.parts.branch]
optional_value = ""

[[tool.bumpversion.files]]
filename = "pyproject.toml"
search = "version = \"{current_version}\""
replace = "version = \"{new_version}\""

[[tool.bumpversion.files]]
filename = "defs.mk"
search = "VERSION = {current_version}"
replace = "VERSION = {new_version}"

[[tool.bumpversion.files]]
filename = "src/flair/__init__.py"
search = "VERSION = \"{current_version}\""
replace = "VERSION = \"{new_version}\""

[[tool.bumpversion.files]]
filename = "misc/Dockerfile"
search = "flair-brookslab==v{current_version}"
replace = "flair-brookslab==v{new_version}"

[[tool.bumpversion.files]]
filename = "misc/flair_conda_env.yaml"
search = "flair-brookslab==v{current_version}"
replace = "flair-brookslab==v{new_version}"

[[tool.bumpversion.files]]
filename = "misc/flair_diffexp_conda_env.yaml"
search = "flair-brookslab[diffexp]==v{current_version}"
replace = "flair-brookslab[diffexp]==v{new_version}"

[[tool.bumpversion.files]]
filename = "docs/source/installing.rst"
search = "download/v{current_version}/"
replace = "download/v{new_version}/"

[[tool.bumpversion.files]]
filename = "docs/source/installing.rst"
search = "/flair:{current_version}"
replace = "/flair:{new_version}"

